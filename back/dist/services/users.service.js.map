{"version":3,"sources":["../../src/services/users.service.ts"],"sourcesContent":["import { hash } from 'bcrypt';\nimport { Service } from 'typedi';\nimport { HttpException } from '@exceptions/httpException';\nimport { User } from '@interfaces/users.interface';\nimport { UserModel } from '@models/users.model';\n\n@Service()\nexport class UserService {\n  public async findAllUser(): Promise<User[]> {\n    const users: User[] = UserModel;\n    return users;\n  }\n\n  public async findUserById(userId: number): Promise<User> {\n    const findUser: User = UserModel.find(user => user.id === userId);\n    if (!findUser) throw new HttpException(409, \"User doesn't exist\");\n\n    return findUser;\n  }\n\n  public async createUser(userData: User): Promise<User> {\n    const findUser: User = UserModel.find(user => user.email === userData.email);\n    if (findUser) throw new HttpException(409, `This email ${userData.email} already exists`);\n\n    const hashedPassword = await hash(userData.password, 10);\n    const createUserData: User = { ...userData, id: UserModel.length + 1, password: hashedPassword };\n\n    return createUserData;\n  }\n\n  public async updateUser(userId: number, userData: User): Promise<User[]> {\n    const findUser: User = UserModel.find(user => user.id === userId);\n    if (!findUser) throw new HttpException(409, \"User doesn't exist\");\n\n    const hashedPassword = await hash(userData.password, 10);\n    const updateUserData: User[] = UserModel.map((user: User) => {\n      if (user.id === findUser.id) user = { ...userData, id: userId, password: hashedPassword };\n      return user;\n    });\n\n    return updateUserData;\n  }\n\n  public async deleteUser(userId: number): Promise<User[]> {\n    const findUser: User = UserModel.find(user => user.id === userId);\n    if (!findUser) throw new HttpException(409, \"User doesn't exist\");\n\n    const deleteUserData: User[] = UserModel.filter(user => user.id !== findUser.id);\n    return deleteUserData;\n  }\n}\n"],"names":["UserService","findAllUser","users","UserModel","findUserById","userId","findUser","find","user","id","HttpException","createUser","userData","email","hashedPassword","hash","password","createUserData","length","updateUser","updateUserData","map","deleteUser","deleteUserData","filter"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBAPQ;wBACG;+BACM;4BAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGnB,IAAA,AAAMA,cAAN,MAAMA;IACX,MAAaC,cAA+B;QAC1C,MAAMC,QAAgBC,qBAAS;QAC/B,OAAOD;IACT;IAEA,MAAaE,aAAaC,MAAc,EAAiB;QACvD,MAAMC,WAAiBH,qBAAS,CAACI,IAAI,CAACC,CAAAA,OAAQA,KAAKC,EAAE,KAAKJ;QAC1D,IAAI,CAACC,UAAU,MAAM,IAAII,4BAAa,CAAC,KAAK;QAE5C,OAAOJ;IACT;IAEA,MAAaK,WAAWC,QAAc,EAAiB;QACrD,MAAMN,WAAiBH,qBAAS,CAACI,IAAI,CAACC,CAAAA,OAAQA,KAAKK,KAAK,KAAKD,SAASC,KAAK;QAC3E,IAAIP,UAAU,MAAM,IAAII,4BAAa,CAAC,KAAK,CAAC,WAAW,EAAEE,SAASC,KAAK,CAAC,eAAe,CAAC;QAExF,MAAMC,iBAAiB,MAAMC,IAAAA,YAAI,EAACH,SAASI,QAAQ,EAAE;QACrD,MAAMC,iBAAuB,wCAAKL;YAAUH,IAAIN,qBAAS,CAACe,MAAM,GAAG;YAAGF,UAAUF;;QAEhF,OAAOG;IACT;IAEA,MAAaE,WAAWd,MAAc,EAAEO,QAAc,EAAmB;QACvE,MAAMN,WAAiBH,qBAAS,CAACI,IAAI,CAACC,CAAAA,OAAQA,KAAKC,EAAE,KAAKJ;QAC1D,IAAI,CAACC,UAAU,MAAM,IAAII,4BAAa,CAAC,KAAK;QAE5C,MAAMI,iBAAiB,MAAMC,IAAAA,YAAI,EAACH,SAASI,QAAQ,EAAE;QACrD,MAAMI,iBAAyBjB,qBAAS,CAACkB,GAAG,CAAC,CAACb;YAC5C,IAAIA,KAAKC,EAAE,KAAKH,SAASG,EAAE,EAAED,OAAO,wCAAKI;gBAAUH,IAAIJ;gBAAQW,UAAUF;;YACzE,OAAON;QACT;QAEA,OAAOY;IACT;IAEA,MAAaE,WAAWjB,MAAc,EAAmB;QACvD,MAAMC,WAAiBH,qBAAS,CAACI,IAAI,CAACC,CAAAA,OAAQA,KAAKC,EAAE,KAAKJ;QAC1D,IAAI,CAACC,UAAU,MAAM,IAAII,4BAAa,CAAC,KAAK;QAE5C,MAAMa,iBAAyBpB,qBAAS,CAACqB,MAAM,CAAChB,CAAAA,OAAQA,KAAKC,EAAE,KAAKH,SAASG,EAAE;QAC/E,OAAOc;IACT;AACF"}