{"version":3,"sources":["../../src/test/auth.test.ts"],"sourcesContent":["import request from 'supertest';\nimport { App } from '@/app';\nimport { User } from '@interfaces/users.interface';\nimport { AuthRoute } from '@routes/auth.route';\n\nafterAll(async () => {\n  await new Promise<void>(resolve => setTimeout(() => resolve(), 500));\n});\n\ndescribe('TEST Authorization API', () => {\n  const route = new AuthRoute();\n  const app = new App([route]);\n\n  describe('[POST] /signup', () => {\n    it('response should have the Create userData', () => {\n      const userData: User = {\n        email: 'example@email.com',\n        password: 'password123456789',\n      };\n\n      return request(app.getServer()).post('/signup').send(userData).expect(201);\n    });\n  });\n\n  describe('[POST] /login', () => {\n    it('response should have the Set-Cookie header with the Authorization token', () => {\n      const userData: User = {\n        email: 'example1@email.com',\n        password: 'password123456789',\n      };\n\n      return request(app.getServer())\n        .post('/login')\n        .send(userData)\n        .expect('Set-Cookie', /^Authorization=.+/)\n        .expect(200);\n    });\n  });\n\n  // error: StatusCode : 404, Message : Authentication token missing\n  // describe('[POST] /logout', () => {\n  //   it('logout Set-Cookie Authorization=; Max-age=0', () => {\n  //     const route = new AuthRoute()\n  //     const app = new App([route]);\n\n  //     return request(app.getServer())\n  //       .post('/logout')\n  //       .expect('Set-Cookie', /^Authorization=\\;/)\n  //       .expect(200);\n  //   });\n  // });\n});\n"],"names":["afterAll","Promise","resolve","setTimeout","describe","route","AuthRoute","app","App","it","userData","email","password","request","getServer","post","send","expect"],"mappings":";;;;kEAAoB;qBACA;2BAEM;;;;;;AAE1BA,SAAS;IACP,MAAM,IAAIC,QAAcC,CAAAA,UAAWC,WAAW,IAAMD,WAAW;AACjE;AAEAE,SAAS,0BAA0B;IACjC,MAAMC,QAAQ,IAAIC,oBAAS;IAC3B,MAAMC,MAAM,IAAIC,QAAG,CAAC;QAACH;KAAM;IAE3BD,SAAS,kBAAkB;QACzBK,GAAG,4CAA4C;YAC7C,MAAMC,WAAiB;gBACrBC,OAAO;gBACPC,UAAU;YACZ;YAEA,OAAOC,IAAAA,kBAAO,EAACN,IAAIO,SAAS,IAAIC,IAAI,CAAC,WAAWC,IAAI,CAACN,UAAUO,MAAM,CAAC;QACxE;IACF;IAEAb,SAAS,iBAAiB;QACxBK,GAAG,2EAA2E;YAC5E,MAAMC,WAAiB;gBACrBC,OAAO;gBACPC,UAAU;YACZ;YAEA,OAAOC,IAAAA,kBAAO,EAACN,IAAIO,SAAS,IACzBC,IAAI,CAAC,UACLC,IAAI,CAACN,UACLO,MAAM,CAAC,cAAc,qBACrBA,MAAM,CAAC;QACZ;IACF;AAcF"}